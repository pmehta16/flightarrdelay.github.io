<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>ITCS 6190 - Project</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link href="css/custom.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Logo and responsive toggle -->
            <!-- <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                    <span class="glyphicon glyphicon-fire"></span> 
                    Logo
                </a>
            </div> -->
            <!-- Navbar links -->
            <!-- <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">Products</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Services <span class="caret"></span></a>
                        <ul class="dropdown-menu" aria-labelledby="about-us">
                            <li><a href="#">Engage</a></li>
                            <li><a href="#">Pontificate</a></li>
                            <li><a href="#">Synergize</a></li>
                        </ul>
                    </li>
                </ul> -->

                <!-- Search -->
                <!-- <form class="navbar-form navbar-right" role="search">
                    <div class="form-group">
                        <input type="text" class="form-control">
                    </div>
                    <button type="submit" class="btn btn-default">Search</button>
                </form> -->

            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="jumbotron feature">
        <div class="container">
            <h1><span class="glyphicon glyphicon-equalizer"></span> Flight Arrival Delay Prediction - A Spark Application</h1>
            <p>Predicts the delay in Arrival time of flights.</p>
        </div>
    </div>

    <!-- Content -->
    <div class="container">

        <!-- Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Overview
                    <small> - An Introduction</small>
                </h2>
                <p>Our project aims at predicting the arrival delay of flight using only information available before 
                    the flight takes off. The target variable (ArrDelay - arrival delay) is a numerical value we 
                    will use regression algorithms only. We will be analyzing a big data set and for such amount of
                    data we need big data tools such as Spark. Spark can store big datasets in cluster memory with
                    paging from disk as required and effectively runs machine learning algorithms without
                    having to sync multiple times to the disk, making them run faster. 

                    In statistics, linear regression is a linear approach for modelling the relationship between a <br>
                    scalar response and one or more explanatory variables (also known as dependent and independent variables).<br>
                    The case of one explanatory variable is called simple linear regression; for more than one, the process is <br>
                    called multiple linear regression. Our project is an example of Multiple Linear Regression where we will be <br>
                    predicting the Flightâ€™s Arrival Delay.
                    </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Tasks and Approach of implementation
                    <small>-Steps involved</small>
                </h2>
                <p color = "Black">1. The first step involved is to perform an exploratory Data Analysis by creating a correlation matrix to understand the dataset.<br>
                   2. Second step is to process the data such that categorical values can be used for Linear regression. This step involves converting variables to <br>
                   numerical values. We will be using OneHotEncoder library for implementing the same.<br>
                   3. Third step is to scale the dataset to fit the model followed by splitting the data into training and test data sets.<br>
                   4. Fourth step is to perform Liner Regression on the data using Gradient Descent.<br>
                   5. Final step is to do compute the predictions for the test data followed by computing the R2 score to evaluate models performance<br>
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Context
                    <small>-Motivation for Project</small>
                </h2>
                <p color = "Black">Air travel is the most preferred way to travel. By 2030, more than 45000 connections will be observed per day on an average metro airport.<br>
                     This makes it important to study the feasibility of taking a flight. For example:- If a flight from Charlotte to Atlanta takes an average time of <br>
                     1 hour 18 minutes. But the flight is generally delayed by 20 minutes on average. This could make it impractical for someone as we have to reach the <br> 
                     airport 1 hour in advance, and also travel time to the airport adds up. Whereas, the same distance can be covered by car in equivalent time. <br>
                     Hence, Understanding the delay of any particular airline at any given airport is important. This can also be used as a feedback mechanism for <br>
                     airlines to make sure that the flight is not delayed. Our model will focus on predicting the delay in flights.
                    </p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">About Dataset
                </h2>
                <p color = "Black">The data used for this project is taken from the data published by the US Department of Transportation. We have used data <br>
                    from 2018. Size of dataset used - 893 MB. It consists of 7213446 rows and 28 columns. To study the data and relationship between the <br>
                    columns we did a correlation analysis on the dataset to fetch the important set of features. After analysing the data we dropped these columns - <br><br> 
                    <span style=color:darkred> 'FL_DATE', 'OP_CARRIER_FL_NUM', 'ORIGIN', 'DEST','CRS_DEP_TIME', 'DEP_TIME', 'WHEELS_OFF', 'WHEELS_ON', 'CRS_ARR_TIME','CANCELLED' </span><br><br>
                    And we fetched the following set of columns to perform Linear Regression - <br><br>
                    <span style=color:darkred>'DEP_DELAY', 'TAXI_OUT', 'CRS_ELAPSED_TIME', 'DISTANCE', 'flight_weekday_1', 'flight_weekday_2', 'flight_weekday_3', 'flight_weekday_4', 'flight_weekday_5', 'flight_weekday_6','flight_weekday_7'</span><br><br>

                    We plotted the following graph to understand the distribution of delay time on the flight data for 2018 - <br>
                    <img src = "img/piechart.png">
                </p>

            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Frameworks and Techniques
                </h2>
                <h5>Frameworks</h5>
                <p color = "Black">We have implemented the algorithm using the Pyspark framework. Execution of code was done on the DSBA Hadoop cluster. <br>
                    Along with Pyspark we have used numpy, pandas and matplotlib libraries to perform operations and compute graphs on the data. For Data Processing <br>
                    we have used OnehotEncoder library. For Scaling the data we have used StandardScaler from sklearn. <br>
                </p>
            <h5>Techniques -</h5>
<pre>
<b>1.) Data Analysis</b>
    Firstly, to analyse the problem and dataset we did an exploratory data analysis. Since most variables are numerical we created a correlation
    matrix, of the numerical variables, to understand if we can find any correlation between the attributes.  The closer the value is to 1 or -1, 
    the more positively or negatively the variables are correlated. A correlation of zero means that the two attributes are not correlated at all.
    Looking at the correlation matrix we concluded that the DepDelay (departure delay) is highly correlated to arrival delay, so the departure 
    delay might be the most indicative attribute of a flight delay. Also, although weak, there exists a correlation between the TaxiOut and arrival
    delay. Therefore we will consider these two as well. Following graph shows the correlation between columns:
    <img src = "img/correlationmatrix.png">
    <br>
<b>2.) Cleaning the data</b>
    We used the .drop() function to drop all the columns that were concerned with the details after the flight took off and also columns that 
    were too correlated between themselves and could be redundant to the model causing the model to overfit. We also dropped cancelled flights and 
    variables that were not correlated to the arrival delay.
 
<b>3.) Data Processing</b>
    To use the categorical variables in the regression algorithm, further processing was needed. The variables were converted to numerical values by 
    applying OneHotEncoder. Data after performing OneHot encoding - 
    <br>
    <img src = "img/clouddf.PNG">
    <br>
    <img src = "img/clouddf2.PNG">
    <br>
    
<b>4.)Scaling and Splitting the Data</b>
    After Onehot endcoding the data we separate the feature and target variables and scaled the dataset using sklearn 'StandarScaler' library. Post This
    step we split the data into training and test sets in the ratio 75:25.<br>
<b>5.) Training the model</b>
We found that variables - departure delay and arrival delay displayed a high correlation and so were used for performing Linear Regression. We have performed 
the Linear Regression using Gradient Descent, iteratively optimizing the weights and bias in each iteration. Helper cost function returns the cost with current
weights and bias. Below graph shows the convergence of Gradient Descent Loss function  -
    <img src = "img/loss.png">
    <br>
<b>6.) Result</b>
    To conclude we have computed the y_pred (Predictions on our test data), r2 score (goodness of fit of the regression model) and plotted the graph showing 
    the predictions as computed using Linear Regression. We have tested the performace of our model by performing a hyperparameter tuning by changing the value
    of alpha and computed the r2 scores for different cases.
</pre>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Performace Evalutaion
                    <small>-Results</small>
                </h2>
                <p>
    We computed the following metrics and graphs to evaluate the models performance - <br><br>
    Graph Plot Description: 
    Red color = Y axis : Predicted Arrival Delay and X-axis : List of all Independent Features <br>
    Black color = Y-axis : Actual Arrival Delay and X-axis : Independent Feature (Departure Delay)
    <h3>Without Regularization</h3>
    <h4>With alpha = 0.01</h4>
    <b> <span style=color:darkred> a.) R2 score = 0.9449527520902039 </span> <br></b>
    <b><span style=color:darkred> b.) Linear regression - Data plot </span> <br></b>
    
    <img src="img/both001.PNG">

    <h4>With alpha = 0.001</h4>
    <b> <span style=color:darkred> a.) R2 score = 0.5736573766646317 </span> <br></b>
                
    <b><span style=color:darkred> b.) Linear regression - Data plot  </span> <br></b>
    <img src="img/alpha0001lambda0.PNG">

    <h4>With Regularization setting value of lambda as = 1</h4>
    Here we saw that due to higher penalty, our model underfits.
    <h4>With alpha = 0.01</h4>
    <b> <span style=color:darkred> a.) R2 score = 0.7137557543371771  </span> <br></b>
                
    <b><span style=color:darkred> b.) Linear regression - Data plot  </span> <br></b>
    <img src="img/lambda1alpha001.PNG">

    <h4>With alpha = 0.001</h4>
    <b> <span style=color:darkred> a.) R2 score = 0.5023864474173623  </span> <br></b>
                
    <b><span style=color:darkred> b.) Linear regression - Data plot  </span> <br></b>
    <img src="img/lambda1alpha0001.PNG">
    
    
    <!-- <h4>With alpah = 0.001</h4>
    <b> <span style=color:darkred> a.) R2 score = 0.9449527520902039 </span> <br></b>
                
    <b><span style=color:darkred> b.) Linear regression - Data plot  </span> <br></b>
    <img src="img/result.png"> -->
                </p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Final Project Accomplishment stages
                </h2>
                <p color = "Black">
                    a.) Least - The final project will be able to predict the arrival delay an find its accuracy by calculating the R2 score
                    using Linear Regression <br>
                    b.) Will try - Use gradient Descent with the regression model. <br>
                    c.) Aim - Achieve an optimal model by applying regularization and different loss functions.
                    Hyperparameter tuning to increase the accuracy of our model.<br>
                    </p>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <h2 class="page-header">Task Division
                </h2>
                <p style=color:Black> <h4>Mohit's Tasks</h4>
                    1.) Processing the data and converting variables to numerical values by using OneHotEncoder.<br>
                    2.) Training the data using Linear regression by implementing Gradient descent.<br>
                    3.) Perform hyperparameter tuning to increase the accuracy of our model. <br>
                    4.) Working on the Report<br><br>
                 </p>
                 <p style=color:Black> <h4>Pranjali's Tasks</h4>
                    1.) Performing an exploratory Data Analysis by creating a correlation matrix to understand the dataset.<br> 
                    2.) Data Preprocessing steps such as cleaning and scaling the data<br>
                    3.) Perform hyperparameter tuning to increase the accuracy of our model. <br>
                    4.) Working on the Report<br>
                 </p>
            </div>
        </div>

       

    </div>
    <!-- /.container -->
    
    <footer>
        <!-- <div class="footer-blurb">
            <div class="container">
                <div class="row">
                    <div class="col-sm-4 footer-blurb-item">
                        <h3><span class="glyphicon glyphicon-fire"></span> Dynamically Procrastinate</h3>
                        <p>Collaboratively administrate empowered markets via plug-and-play networks. Dynamically procrastinate B2C users after installed base benefits. Dramatically visualize customer directed convergence without revolutionary ROI.</p>
                        <p><a class="btn btn-default" href="#">Procrastinate</a></p>
                    </div>
                    <div class="col-sm-4 footer-blurb-item">
                        <h3><span class="glyphicon glyphicon-cloud-upload"></span> Efficiently Unleash</h3>
                        <p>Dramatically maintain clicks-and-mortar solutions without functional solutions. Efficiently unleash cross-media information without cross-media value. Quickly maximize timely deliverables for real-time schemas. </p>
                        <p><a class="btn btn-default" href="#">Unleash</a></p>
                    </div>
                    <div class="col-sm-4 footer-blurb-item">
                        <h3><span class="glyphicon glyphicon-leaf"></span> Completely Synergize</h3>
                        <p>Professionally cultivate one-to-one customer service with robust ideas. Completely synergize resource taxing relationships via premier niche markets. Dynamically innovate resource-leveling customer service for state of the art customer service.</p>
                        <p><a class="btn btn-default" href="#">Synergize</a></p>
                    </div>

                </div>
                <!-- /.row -->  
            </div>
        </div> -->
        
        <div class="small-print">
            <div class="container">
                <p style=color:black><h3>Submitted By : Mohit Gupta (801199727) and Pranjali Mehta (801255574)</h3></p>
            </div>
        </div>
    </footer>

    
    <!-- jQuery -->
    <script src="js/jquery-1.11.3.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
    
    <!-- IE10 viewport bug workaround -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
    
    <!-- Placeholder Images -->
    <script src="js/holder.min.js"></script>
    
</body>

</html>
